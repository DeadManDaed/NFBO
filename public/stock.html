<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Gestion des Stocks</title>
  <style>
    /* Bloc CSS global */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background: #f5f5f5; color: #333; }

    /* Header */
    .header { background: linear-gradient(135deg, #1976d2, #42a5f5); color: white; padding: 20px 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
    .header-left { display: flex; align-items: center; gap: 20px; }
    .logo { width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; }
    .header-title h1 { font-size: 24px; margin-bottom: 5px; }
    .header-title p { font-size: 14px; opacity: 0.9; }
    .header-actions { display: flex; gap: 15px; align-items: center; }
    .btn-dashboard { background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 8px; }
    .btn-dashboard:hover { background: rgba(255,255,255,0.3); }
    .btn-logout { background: rgba(244, 67, 54, 0.8); border: none; color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; }
    /* Navigation tabs */
    .nav-tabs { background: white; padding: 0 40px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; gap: 5px; overflow-x: auto; }
    .nav-tab { padding: 18px 25px; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s; font-weight: 600; color: #666; white-space: nowrap; display: flex; align-items: center; gap: 8px; }
    .nav-tab:hover { color: #1976d2; background: #f9f9f9; }
    .nav-tab.active { color: #1976d2; border-bottom-color: #1976d2; background: #f9f9f9; }

    /* Container */
    .container { max-width: 1400px; margin: 0 auto; padding: 30px 40px; }
    .tab-content { display: none; }
    .tab-content.active { display: block; animation: fadeIn 0.3s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Cards */
    .card { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 25px; }
    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0; }
    .card-title { font-size: 22px; font-weight: 700; color: #1976d2; display: flex; align-items: center; gap: 10px; }

    /* Form styles */
    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
    .form-group { display: flex; flex-direction: column; }
    label { font-weight: 600; margin-bottom: 8px; color: #333; font-size: 14px; }
    input, select, textarea { padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; transition: all 0.3s; font-family: inherit; }
    input:focus, select:focus, textarea:focus { outline: none; border-color: #1976d2; box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1); }
    /* Buttons */
    .btn { padding: 12px 24px; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 8px; }
    .btn-primary { background: linear-gradient(135deg, #1976d2, #42a5f5); color: white; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(25, 118, 210, 0.3); }
    .btn-secondary { background: #f5f5f5; color: #666; }
    .btn-secondary:hover { background: #e0e0e0; }
    .btn-success { background: linear-gradient(135deg, #43a047, #388e3c); color: white; }
    .btn-danger { background: linear-gradient(135deg, #e53935, #d32f2f); color: white; }
    .btn-warning { background: linear-gradient(135deg, #fb8c00, #f57c00); color: white; }

    /* Table */
    .table-container { overflow-x: auto; margin-top: 20px; }
    table { width: 100%; border-collapse: collapse; }
    th { background: #f9f9f9; padding: 15px; text-align: left; font-weight: 600; color: #666; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; }
    td { padding: 15px; border-bottom: 1px solid #f0f0f0; font-size: 14px; }
    tr:hover { background: #fafafa; }

    /* Badges */
    .badge { display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
    .badge-entree { background: #e8f5e9; color: #388e3c; }
    .badge-sortie { background: #fff3e0; color: #f57c00; }
    .badge-disponible { background: #e3f2fd; color: #1976d2; }
    .badge-alerte { background: #ffebee; color: #d32f2f; }
    /* Alert messages */
    .alert { padding: 15px 20px; border-radius: 10px; margin-bottom: 20px; display: none; animation: slideDown 0.3s; }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .alert-success { background: #e8f5e9; border: 1px solid #66bb6a; color: #2e7d32; }
    .alert-error { background: #ffebee; border: 1px solid #ef5350; color: #c62828; }
    .alert-warning { background: #fff3e0; border: 1px solid #ffa726; color: #f57c00; }

    /* Stats cards */
    .stats-row { display: grid; grid-template-columns: repeat(auto-fit    .alert-warning { background: #fff3e0; border: 1px solid #ffa726; color: #f57c00; }

    /* Stats cards */
    .stats-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .stat-card { background: white; padding: 20px; border-radius: 12px; border-left: 4px solid #1976d2; }
    .stat-value { font-size: 32px; font-weight: 700; color: #1976d2; margin-bottom: 5px; }
    .stat-label { color: #666; font-size: 14px; }

    /* Loading spinner */
    .loading { text-align: center; padding: 40px; color: #999; }
    .loading-spinner { display: inline-block; width: 40px; height: 40px; border: 4px solid #f0f0f0; border-radius: 50%; border-top-color: #1976d2; animation: spin 0.8s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Action buttons in table */
    .action-btns { display: flex; gap: 8px; }
    .btn-icon { padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
    .btn-icon:hover { transform: scale(1.1); }

    /* Responsive */
    @media (max-width: 968px) {
      .container { padding: 20px; }
      .header { padding: 15px 20px; flex-direction: column; gap: 15px; }
      .nav-tabs { padding: 0 20px; }
      .form-grid { grid-template-columns: 1fr; }
      .action-btns { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-left">
      <div class="logo">üì¶</div>
      <div class="header-title">
        <h1>Gestion des Stocks</h1>
        <p>Administration et suivi des lots</p>
      </div>
    </div>
    <div class="header-actions">
      <button class="btn-dashboard">üè† Tableau de bord</button>
      <button class="btn-logout">D√©connexion</button>
    </div>
  </div>

  <div class="nav-tabs">
    <div class="nav-tab active" data-tab="definition">D√©finition des lots</div>
    <div class="nav-tab" data-tab="admission">Admission des lots</div>
    <div class="nav-tab" data-tab="stock">Mouvements de stock</div>
    <div class="nav-tab" data-tab="suivi">Suivi des recettes</div>
  </div>

  <div class="container">
    <div id="definition" class="tab-content active">
      <div class="card">
        <div class="card-header">
          <div class="card-title">D√©finition des lots</div>
        </div>
        <form id="newLotForm">
          <div class="form-grid">
            <div class="form-group">
              <label for="categorieLot">Cat√©gorie *</label>
              <select id="categorieLot" required onchange="loadCriteria(this.value)">
                <option value="">S√©lectionner</option>
                <option value="frais">Produits frais</option>
                <option value="court">Cycle court</option>
                <option value="secs">Produits secs</option>
                <option value="manualim">Manufactur√©s alimentaires</option>
                <option value="nonalim">Manufactur√©s non alimentaires</option>
                <option value="sensible">Produits sensibles</option>
              </select>
            </div>
            <div class="form-group">
              <label for="description">Description *</label>
              <input type="text" id="description" required>
            </div>
            <div class="form-group">
              <label for="prixRef">Prix de r√©f√©rence *</label>
              <input type="number" id="prixRef" required min="0" step="0.01">
            </div>
            <div class="form-group">
              <label for="unitesLot">Unit√©s admises *</label>
              <select id="unitesLot" multiple required>
                <option value="kg">Kilogrammes</option>
                <option value="g">Grammes</option>
                <option value="L">Litres</option>
                <option value="unite">Unit√©s</option>
                <option value="sac">Sacs</option>
                <option value="caisse">Caisses</option>
              </select>
            </div>
            <div class="form-group">
              <label>Crit√®res d‚Äôadmission</label>
              <ul id="criteriaList"></ul>
              <button type="button" id="addCriteriaBtn" class="btn btn-secondary" style="display:none;">‚ûï Nouveau crit√®re</button>
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Cr√©er le lot</button>
          </div>
        </form>
      </div>
    </div>
    <div id="admission" class="tab-content">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Admission des lots</div>
        </div>
        <form id="admissionForm">
          <div class="form-grid">
            <div class="form-group">
              <label for="lotSelect">Produit / Lot *</label>
              <select id="lotSelect" required onchange="loadUnitsForLot(this.value)"></select>
            </div>
            <div class="form-group">
              <label for="quantity">Quantit√© *</label>
              <input type="number" id="quantity" min="0" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="unitSelect">Unit√© *</label>
              <select id="unitSelect" required></select>
            </div>
            <div class="form-group">
              <label for="price">Prix (unit√©) *</label>
              <input type="number" id="price" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="qualityCoeff">Coefficient qualit√© *</label>
              <input type="number" id="qualityCoeff" step="0.01" min="0" required>
            </div>
            <div class="form-group">
              <label for="producerSelect">D√©posant *</label>
              <select id="producerSelect" required></select>
            </div>
            <div class="form-group">
              <label for="expirationDate">Date d‚Äôexpiration</label>
              <input type="date" id="expirationDate">
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">‚ûï Enregistrer l‚Äôadmission</button>
            <button type="button" class="btn btn-warning" id="reportErrorBtn">‚ö†Ô∏è Signaler une erreur</button>
          </div>
        </form>
      </div>
    </div>
    <div id="stock" class="tab-content">
  <div class="card">
    <div class="card-header">
      <div class="card-title">Mouvements de stock</div>
    </div>

    <!-- Liste des mouvements existants -->
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Lot</th>
            <th>Type</th>
            <th>Quantit√©</th>
            <th>Utilisateur</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="stockMovementsList">
          <!-- Exemple de ligne -->
          <tr>
            <td>2025-12-17</td>
            <td>Lot #12 - Tomates</td>
            <td><span class="badge badge-entree">Entr√©e</span></td>
            <td>50 kg</td>
            <td>magasinier1</td>
            <td class="action-btns">
              <button class="btn-icon btn-warning">‚ö†Ô∏è Signaler erreur</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Bouton pour ajouter un nouveau mouvement -->
    <div class="form-actions" style="margin-top:20px;">
      <button id="newStockBtn" class="btn btn-primary">‚ûï Nouveau mouvement</button>
    </div>

    <!-- Formulaire cach√© qui s‚Äôouvre au clic -->
    <form id="stockForm" style="display:none; margin-top:20px;">
      <div class="form-grid">
        <div class="form-group">
          <label for="stockLot">Lot *</label>
          <select id="stockLot" required></select>
        </div>
        <div class="form-group">
          <label for="movementType">Type *</label>
          <select id="movementType" required>
            <option value="entree">Entr√©e</option>
            <option value="sortie">Sortie</option>
          </select>
        </div>
        <div class="form-group">
          <label for="stockQuantity">Quantit√© *</label>
          <input type="number" id="stockQuantity" min="0" step="0.01" required>
        </div>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn btn-success">‚úÖ Enregistrer</button>
        <button type="button" class="btn btn-secondary" id="cancelStockBtn">Annuler</button>
      </div>
    </form>
  </div>
</div>
<div id="transfer" class="tab-content">
  <div class="card">
    <div class="card-header">
      <div class="card-title">Transfert inter‚Äëmagasins</div>
    </div>

    <!-- Liste des transferts existants -->
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Lot</th>
            <th>Quantit√©</th>
            <th>Magasin source</th>
            <th>Magasin destinataire</th>
            <th>Utilisateur</th>
          </tr>
        </thead>
        <tbody id="transferList">
          <!-- Exemple de ligne -->
          <tr>
            <td>2025-12-17</td>
            <td>Lot #12 - Tomates</td>
            <td>50 kg</td>
            <td>Magasin Central</td>
            <td>Magasin Nord</td>
            <td>magasinier1</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Bouton pour ajouter un nouveau transfert -->
    <div class="form-actions" style="margin-top:20px;">
      <button id="newTransferBtn" class="btn btn-primary">‚ûï Nouveau transfert</button>
    </div>

    <!-- Formulaire cach√© -->
    <form id="transferForm" style="display:none; margin-top:20px;">
      <div class="form-grid">
        <div class="form-group">
          <label for="transferLot">Lot *</label>
          <select id="transferLot" required></select>
        </div>
        <div class="form-group">
          <label for="transferQuantity">Quantit√© *</label>
          <input type="number" id="transferQuantity" min="0" step="0.01" required>
        </div>
        <div class="form-group">
          <label for="destMagasin">Magasin destinataire *</label>
          <select id="destMagasin" required></select>
        </div>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn btn-success">‚úÖ Enregistrer transfert</button>
        <button type="button" class="btn btn-secondary" id="cancelTransferBtn">Annuler</button>
      </div>
    </form>
  </div>
</div>

  <script>
    // Gestion des onglets
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // Crit√®res par cat√©gorie
    const defaultCriteria = {
      frais: ["Fra√Æcheur", "Calibre minimum", "Absence de pesticides", "Pr√©sentation propre"],
      court: ["Date r√©cente", "Dur√©e ‚â§ 7 jours", "Cha√Æne de froid", "Emballage adapt√©"],
      secs: ["Humidit√© ‚â§ 12%", "Absence de moisissures", "Uniformit√© du tri", "Odeur normale"],
      manualim: ["Conformit√© hygi√®ne", "Date fabrication & p√©remption", "Emballage conforme", "Certification interne"],
      nonalim: ["Finition correcte", "Solidit√©", "Esth√©tique", "Tra√ßabilit√©"],
      sensible: ["Stockage contr√¥l√©", "Tra√ßabilit√© stricte", "Emballage s√©curis√©", "Autorisation r√©glementaire"]
    };

    function loadCriteria(cat) {
      const list = document.getElementById('criteriaList');
      list.innerHTML = "";
      if (defaultCriteria[cat]) {
        defaultCriteria[cat].forEach(c => {
          const li = document.createElement('li');
          li.textContent = c;
          list.appendChild(li);
        });
        document.getElementById('addCriteriaBtn').style.display = 'inline-block';
      }
    }
    // Charger lots et producteurs
    async function loadLots() {
      const response = await fetch('/api/lots');
      const lots = await response.json();
      const select = document.getElementById('lotSelect');
      select.innerHTML = '<option value="">S√©lectionner un lot</option>' +
        lots.map(l => `<option value="${l.id}" data-unites='${JSON.stringify(l.unites_admises)}'>${l.description} (${l.categorie})</option>`).join('');
      const stockSelect = document.getElementById('stockLot');
      stockSelect.innerHTML = select.innerHTML;
    }

    function loadUnitsForLot(lotId) {
      const selectLot = document.getElementById('lotSelect');
      const selectedOption = selectLot.options[selectLot.selectedIndex];
      const unites = JSON.parse(selectedOption.getAttribute('data-unites') || '[]');
      const unitSelect = document.getElementById('unitSelect');
      unitSelect.innerHTML = unites.map(u => `<option value="${u}">${u}</option>`).join('');
    }

    async function loadProducers() {
      const response = await fetch('/api/producteurs');
      const producers = await response.json();
      const select = document.getElementById('producerSelect');
      select.innerHTML = '<option value="">S√©lectionner un producteur</option>' +
        producers.map(p => `<option value="${p.id}">${p.nom_producteur} - ${p.tel_producteur}</option>`).join('');
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadLots();
      loadProducers();
    });
    // soumission d'une nouvelle admission de lot
document.getElementById('admissionForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const lot_id = document.getElementById('lotSelect').value;
  const quantite = parseFloat(document.getElementById('quantity').value);
  const unite = document.getElementById('unitSelect').value;
  const prix_ref = parseFloat(document.getElementById('price').value);
  const coef_qualite = parseFloat(document.getElementById('qualityCoeff').value);
  const producteur_id = document.getElementById('producerSelect').value;
  const date_expiration = document.getElementById('expirationDate').value || null;

  // Champs obligatoires suppl√©mentaires
  const date_reception = new Date().toISOString().split('T')[0]; // aujourd‚Äôhui
  const magasin_id = 1; // √† adapter selon le compte connect√©
  const utilisateur = "admin"; // ou superadmin, selon session

  const response = await fetch('/api/admissions', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      lot_id, producteur_id, quantite, unite, prix_ref,
      date_reception, date_expiration, magasin_id, utilisateur,
      coef_qualite
    })
  });

  if (response.ok) {
    showAlert('Admission enregistr√©e ‚úÖ', 'success');
  } else {
    showAlert('Erreur lors de l‚Äôenregistrement ‚ùå', 'error');
  }
});
    // nouveau lot - d√©finition et soumission
document.getElementById('newLotForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const description = document.getElementById('description').value;
  const categorie = document.getElementById('categorieLot').value;
  const prix_ref = parseFloat(document.getElementById('prixRef').value);

  // R√©cup√©rer unit√©s admises (multi-select)
  const unitesSelect = document.getElementById('unitesLot');
  const unites_admises = Array.from(unitesSelect.selectedOptions).map(opt => opt.value);

  // R√©cup√©rer crit√®res admission (liste UL)
  const criteres = Array.from(document.querySelectorAll('#criteriaList li')).map(li => li.textContent);

  const response = await fetch('/api/lots', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      description,
      categorie,
      prix_ref,
      unites_admises,       // envoy√© comme tableau ‚Üí backend doit ins√©rer en JSONB
      criteres_admission: criteres // idem
    })
  });

  if (response.ok) {
    showAlert('Lot cr√©√© ‚úÖ', 'success');
  } else {
    showAlert('Erreur lors de la cr√©ation ‚ùå', 'error');
  }
});
    // Afficher/masquer le formulaire
document.getElementById('newStockBtn').addEventListener('click', () => {
  document.getElementById('stockForm').style.display = 'block';
});

document.getElementById('cancelStockBtn').addEventListener('click', () => {
  document.getElementById('stockForm').style.display = 'none';
});

// Soumission du formulaire
document.getElementById('stockForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const lotId = document.getElementById('stockLot').value;
  const type = document.getElementById('movementType').value;
  const quantity = parseFloat(document.getElementById('stockQuantity').value);

  const response = await fetch('/api/stock', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ lotId, type, quantity, utilisateur: "magasinier1" })
  });

  if (response.ok) {
    showAlert('Mouvement enregistr√© ‚úÖ', 'success');
    // Ajouter la nouvelle ligne dans le tableau
    const tbody = document.getElementById('stockMovementsList');
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${new Date().toISOString().split('T')[0]}</td>
      <td>Lot #${lotId}</td>
      <td><span class="badge ${type === 'entree' ? 'badge-entree' : 'badge-sortie'}">${type}</span></td>
      <td>${quantity}</td>
      <td>magasinier1</td>
      <td class="action-btns"><button class="btn-icon btn-warning">‚ö†Ô∏è Signaler erreur</button></td>
    `;
    tbody.appendChild(tr);
    document.getElementById('stockForm').reset();
    document.getElementById('stockForm').style.display = 'none';
  } else {
    showAlert('Erreur lors de l‚Äôenregistrement ‚ùå', 'error');
  }
});
// Afficher/masquer le formulaire
document.getElementById('newTransferBtn').addEventListener('click', async () => {
  document.getElementById('transferForm').style.display = 'block';

  // Charger lots
  const lotsResp = await fetch('/api/lots');
  const lots = await lotsResp.json();
  document.getElementById('transferLot').innerHTML =
    lots.map(l => `<option value="${l.id}">${l.description} (${l.categorie})</option>`).join('');

  // Charger magasins destinataires
  const magsResp = await fetch('/api/magasins');
  const mags = await magsResp.json();
  document.getElementById('destMagasin').innerHTML =
    mags.map(m => `<option value="${m.id}">${m.nom}</option>`).join('');
});

document.getElementById('cancelTransferBtn').addEventListener('click', () => {
  document.getElementById('transferForm').style.display = 'none';
});

// Soumission du formulaire
document.getElementById('transferForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const lotId = document.getElementById('transferLot').value;
  const quantity = parseFloat(document.getElementById('transferQuantity').value);
  const destMagasinId = document.getElementById('destMagasin').value;

  const response = await fetch('/api/retraits', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      lot_id: lotId,
      quantite: quantity,
      type_retrait: 'magasin',
      destination_magasin_id: destMagasinId,
      utilisateur: "magasinier1",
      magasin_id: CURRENT_MAGASIN_ID
    })
  });

  if (response.ok) {
    showAlert('Transfert enregistr√© ‚úÖ', 'success');
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${new Date().toISOString().split('T')[0]}</td>
      <td>Lot #${lotId}</td>
      <td>${quantity}</td>
      <td>Magasin ${CURRENT_MAGASIN_NAME}</td>
      <td>Magasin ${document.getElementById('destMagasin').selectedOptions[0].text}</td>
      <td>magasinier1</td>
    `;
    document.getElementById('transferList').appendChild(tr);
    document.getElementById('transferForm').reset();
    document.getElementById('transferForm').style.display = 'none';
  } else {
    showAlert('Erreur lors du transfert ‚ùå', 'error');
  }
});

  </script>
</body>
</html>
